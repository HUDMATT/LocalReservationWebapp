{"ast":null,"code":"import _objectSpread from\"/workspaces/LocalReservationWebapp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useRef,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE='http://localhost:4000/api';const formatTime=time=>{const[hourStr,minuteStr]=time.split(':');const hour=Number(hourStr);if(Number.isNaN(hour)){return time;}const suffix=hour>=12?'PM':'AM';const displayHour=(hour+11)%12+1;return\"\".concat(displayHour,\":\").concat(minuteStr,\" \").concat(suffix);};const todayISO=()=>{const now=new Date();const month=String(now.getMonth()+1).padStart(2,'0');const day=String(now.getDate()).padStart(2,'0');return\"\".concat(now.getFullYear(),\"-\").concat(month,\"-\").concat(day);};const App=()=>{const[dateInput,setDateInput]=useState(todayISO());const[activeDate,setActiveDate]=useState(null);const[tables,setTables]=useState([]);const[groups,setGroups]=useState([]);const[reservations,setReservations]=useState([]);const[selectedTableIds,setSelectedTableIds]=useState([]);const[loading,setLoading]=useState(false);const[modal,setModal]=useState(null);const[toast,setToast]=useState(null);const[canvasWidth,setCanvasWidth]=useState(957);const notificationTimeouts=useRef([]);const dragRef=useRef(null);const canvasRef=useRef(null);const reservationByGroup=useMemo(()=>{const map=new Map();reservations.forEach(res=>map.set(res.groupId,res));return map;},[reservations]);const groupMap=useMemo(()=>{const map=new Map();groups.forEach(group=>map.set(group.groupId,group));return map;},[groups]);const selectedGroupId=useMemo(()=>{if(selectedTableIds.length===0){return null;}const groupIds=selectedTableIds.map(id=>{var _tables$find$groupId,_tables$find;return(_tables$find$groupId=(_tables$find=tables.find(table=>table.tableId===id))===null||_tables$find===void 0?void 0:_tables$find.groupId)!==null&&_tables$find$groupId!==void 0?_tables$find$groupId:null;}).filter(id=>id!==null);if(groupIds.length!==selectedTableIds.length){return null;}const unique=new Set(groupIds);if(unique.size!==1){return null;}return groupIds[0];},[selectedTableIds,tables]);const showToast=(message,type)=>{setToast({message,type});setTimeout(()=>setToast(null),3000);};const requestNotificationPermission=async()=>{if(!('Notification'in window)){showToast('Notifications are not supported in this browser.','error');return;}if(Notification.permission==='granted'){showToast('Notifications already enabled.');return;}const permission=await Notification.requestPermission();if(permission!=='granted'){showToast('Notifications blocked. Enable them in Chrome settings.','error');}};const clearNotifications=()=>{notificationTimeouts.current.forEach(id=>window.clearTimeout(id));notificationTimeouts.current=[];};const scheduleNotifications=()=>{if(!('Notification'in window)||Notification.permission!=='granted'){return;}clearNotifications();if(!activeDate){return;}const now=Date.now();reservations.forEach(reservation=>{const[hourStr,minuteStr]=reservation.time.split(':');const hour=Number(hourStr);const minute=Number(minuteStr);if(Number.isNaN(hour)||Number.isNaN(minute)){return;}const reservationDateTime=new Date(\"\".concat(activeDate,\"T\").concat(reservation.time,\":00\"));const offsets=[{minutes:60,label:'1 hour'},{minutes:30,label:'30 minutes'}];offsets.forEach(offset=>{const notifyAt=reservationDateTime.getTime()-offset.minutes*60*1000;const delay=notifyAt-now;if(delay<=0){return;}const timeoutId=window.setTimeout(()=>{new Notification('Upcoming reservation',{body:\"\".concat(reservation.name,\" in \").concat(offset.label,\" (\").concat(formatTime(reservation.time),\")\")});},delay);notificationTimeouts.current.push(timeoutId);});});};const loadLayout=async date=>{setLoading(true);try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(date));if(!response.ok){throw new Error('Failed to load layout.');}const payload=await response.json();setTables(payload.tables);setGroups(payload.groups);setReservations(payload.reservations);setSelectedTableIds([]);}catch(err){showToast('Could not load layout.','error');}finally{setLoading(false);}};const openDate=async()=>{if(!dateInput){showToast('Pick a date first.','error');return;}setLoading(true);try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(dateInput,\"/init\"),{method:'POST'});if(!response.ok){throw new Error('Failed to initialize layout.');}setActiveDate(dateInput);await loadLayout(dateInput);}catch(err){showToast('Could not open date.','error');}finally{setLoading(false);}};const refreshLayout=async()=>{if(!activeDate){return;}await loadLayout(activeDate);};const handleTableClick=(tableId,event)=>{if(event.shiftKey){setSelectedTableIds(prev=>prev.includes(tableId)?prev.filter(id=>id!==tableId):[...prev,tableId]);return;}setSelectedTableIds([tableId]);};const handlePointerDown=(table,event)=>{if(event.button!==0){return;}const target=event.currentTarget;target.setPointerCapture(event.pointerId);dragRef.current={tableId:table.tableId,startX:table.x,startY:table.y,pointerStartX:event.clientX,pointerStartY:event.clientY};};const handlePointerMove=event=>{if(!dragRef.current){return;}const{tableId,startX,startY,pointerStartX,pointerStartY}=dragRef.current;const deltaX=event.clientX-pointerStartX;const deltaY=event.clientY-pointerStartY;setTables(prev=>prev.map(table=>table.tableId===tableId?_objectSpread(_objectSpread({},table),{},{x:Math.max(0,startX+deltaX),y:Math.max(0,startY+deltaY)}):table));};const handlePointerUp=async event=>{if(!dragRef.current||!activeDate){return;}const{tableId}=dragRef.current;dragRef.current=null;const table=tables.find(item=>item.tableId===tableId);if(!table){return;}try{await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/table/\").concat(tableId),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({x:table.x,y:table.y})});console.log(\"Table \".concat(table.name,\" (\").concat(table.tableId,\") position: x=\").concat(table.x,\", y=\").concat(table.y));}catch(err){showToast('Could not save position.','error');}};const handleGroup=async()=>{if(!activeDate){return;}if(selectedTableIds.length<2){showToast('Select at least two tables to group.','error');return;}try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/group\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tableIds:selectedTableIds})});if(!response.ok){const payload=await response.json();throw new Error(payload.error||'Failed to group.');}await refreshLayout();}catch(err){showToast('Grouping failed. Ungroup tables first.','error');}};const handleUngroup=async()=>{if(!activeDate||!selectedGroupId){showToast('Select a grouped set of tables.','error');return;}if(reservationByGroup.has(selectedGroupId)){showToast('Delete the reservation before ungrouping.','error');return;}try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/ungroup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({groupId:selectedGroupId})});if(!response.ok){const payload=await response.json();throw new Error(payload.error||'Failed to ungroup.');}await refreshLayout();}catch(err){showToast('Ungroup failed.','error');}};const handleTableDoubleClick=async table=>{var _groupMap$get;if(!activeDate){return;}let groupId=table.groupId;if(!groupId){try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/group\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tableIds:[table.tableId]})});if(!response.ok){const payload=await response.json();throw new Error(payload.error||'Failed to create group.');}const payload=await response.json();groupId=payload.groupId;setTables(prev=>prev.map(item=>item.tableId===table.tableId?_objectSpread(_objectSpread({},item),{},{groupId}):item));}catch(err){showToast('Could not create group.','error');return;}}if(groupId===null){showToast('Could not open reservation.','error');return;}const reservation=reservationByGroup.get(groupId)||null;const groupTables=((_groupMap$get=groupMap.get(groupId))===null||_groupMap$get===void 0?void 0:_groupMap$get.tableIds)||[table.tableId];const tableNames=groupTables.map(id=>{var _tables$find2;return((_tables$find2=tables.find(item=>item.tableId===id))===null||_tables$find2===void 0?void 0:_tables$find2.name)||\"T\".concat(id);}).join(', ');setModal({groupId,tableNames,reservation});};const handleReservationSave=async data=>{if(!activeDate||!modal){return;}try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/reservation\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread({groupId:modal.groupId},data))});if(!response.ok){const payload=await response.json();throw new Error(payload.error||'Failed to save reservation.');}setModal(null);await refreshLayout();}catch(err){showToast('Reservation save failed.','error');}};const handleReservationDelete=async()=>{if(!activeDate||!(modal!==null&&modal!==void 0&&modal.reservation)){return;}try{await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/reservation/\").concat(modal.reservation.id),{method:'DELETE'});setModal(null);await refreshLayout();}catch(err){showToast('Reservation delete failed.','error');}};const reservationLabels=useMemo(()=>{const LABEL_PADDING=12;return reservations.map(reservation=>{const tablesInGroup=tables.filter(table=>table.groupId===reservation.groupId);if(tablesInGroup.length===0){return null;}const avgX=tablesInGroup.reduce((sum,table)=>sum+table.x+table.width/2,0)/tablesInGroup.length;const maxY=Math.max(...tablesInGroup.map(table=>table.y+table.height));const clampedX=Math.min(Math.max(avgX,LABEL_PADDING),canvasWidth-LABEL_PADDING);return{id:reservation.id,x:clampedX,y:maxY+10,text:\"\".concat(reservation.name,\" - \").concat(formatTime(reservation.time),\" (\").concat(reservation.partySize,\")\")};}).filter(Boolean);},[reservations,tables]);useEffect(()=>{const updateWidth=()=>{if(canvasRef.current){setCanvasWidth(canvasRef.current.offsetWidth||957);}};updateWidth();window.addEventListener('resize',updateWidth);return()=>window.removeEventListener('resize',updateWidth);},[]);useEffect(()=>{scheduleNotifications();return()=>clearNotifications();},[reservations,activeDate]);if(!activeDate){return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Razorback Pizza Reservations\"})}),/*#__PURE__*/_jsx(\"main\",{className:\"page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card date-picker\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Select date\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"date\",value:dateInput,onChange:event=>setDateInput(event.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:openDate,disabled:loading,children:loading?'Opening...':'Open'}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-note\",children:\"Reservation app for Razorback Pizza. Create or load a floor plan for the selected date.\"})]})}),toast&&/*#__PURE__*/_jsx(\"div\",{className:\"toast \".concat(toast.type||'').trim(),children:toast.message})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Floor Plan for \",activeDate]}),/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:()=>setActiveDate(null),children:\"Change date\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleGroup,children:\"Group\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:handleUngroup,children:\"Ungroup\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:refreshLayout,children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:requestNotificationPermission,children:\"Enable notifications\"}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-note\",children:\"Shift+click to multi-select tables.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"canvas\",ref:canvasRef,children:[tables.map(table=>{const reserved=table.groupId?reservationByGroup.has(table.groupId):false;const selected=selectedTableIds.includes(table.tableId);return/*#__PURE__*/_jsx(\"div\",{className:\"table\".concat(reserved?' reserved':'').concat(selected?' selected':''),style:{width:table.width,height:table.height,left:table.x,top:table.y},onClick:event=>handleTableClick(table.tableId,event),onDoubleClick:()=>handleTableDoubleClick(table),onPointerDown:event=>handlePointerDown(table,event),onPointerMove:handlePointerMove,onPointerUp:handlePointerUp,children:table.name},table.tableId);}),reservationLabels.map(label=>/*#__PURE__*/_jsx(\"div\",{className:\"reservation-label\",style:{left:label.x,top:label.y},children:label.text},label.id))]})]}),modal&&/*#__PURE__*/_jsx(ReservationModal,{modal:modal,onClose:()=>setModal(null),onSave:handleReservationSave,onDelete:handleReservationDelete}),toast&&/*#__PURE__*/_jsx(\"div\",{className:\"toast \".concat(toast.type||'').trim(),children:toast.message})]});};const ReservationModal=_ref=>{var _modal$reservation,_modal$reservation2,_modal$reservation3,_modal$reservation3$p,_modal$reservation4;let{modal,onClose,onSave,onDelete}=_ref;const[time,setTime]=useState(((_modal$reservation=modal.reservation)===null||_modal$reservation===void 0?void 0:_modal$reservation.time)||'18:30');const[name,setName]=useState(((_modal$reservation2=modal.reservation)===null||_modal$reservation2===void 0?void 0:_modal$reservation2.name)||'');const[partySize,setPartySize]=useState(((_modal$reservation3=modal.reservation)===null||_modal$reservation3===void 0?void 0:(_modal$reservation3$p=_modal$reservation3.partySize)===null||_modal$reservation3$p===void 0?void 0:_modal$reservation3$p.toString())||'2');const[notes,setNotes]=useState(((_modal$reservation4=modal.reservation)===null||_modal$reservation4===void 0?void 0:_modal$reservation4.notes)||'');const submit=()=>{const size=Number(partySize);if(!time||!name||Number.isNaN(size)){return;}onSave({time,name,partySize:size,notes});};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:event=>event.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reservation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-note\",children:[\"Tables: \",modal.tableNames]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Time\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"time\",value:time,onChange:event=>setTime(event.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Name\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",value:name,onChange:event=>setName(event.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Party size\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"number\",min:\"1\",value:partySize,onChange:event=>setPartySize(event.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Notes\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",value:notes,onChange:event=>setNotes(event.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:submit,children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:onClose,children:\"Cancel\"}),modal.reservation&&/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:onDelete,children:\"Delete\"})]})]})});};export default App;","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","jsx","_jsx","jsxs","_jsxs","API_BASE","formatTime","time","hourStr","minuteStr","split","hour","Number","isNaN","suffix","displayHour","concat","todayISO","now","Date","month","String","getMonth","padStart","day","getDate","getFullYear","App","dateInput","setDateInput","activeDate","setActiveDate","tables","setTables","groups","setGroups","reservations","setReservations","selectedTableIds","setSelectedTableIds","loading","setLoading","modal","setModal","toast","setToast","canvasWidth","setCanvasWidth","notificationTimeouts","dragRef","canvasRef","reservationByGroup","map","Map","forEach","res","set","groupId","groupMap","group","selectedGroupId","length","groupIds","id","_tables$find$groupId","_tables$find","find","table","tableId","filter","unique","Set","size","showToast","message","type","setTimeout","requestNotificationPermission","window","Notification","permission","requestPermission","clearNotifications","current","clearTimeout","scheduleNotifications","reservation","minute","reservationDateTime","offsets","minutes","label","offset","notifyAt","getTime","delay","timeoutId","body","name","push","loadLayout","date","response","fetch","ok","Error","payload","json","err","openDate","method","refreshLayout","handleTableClick","event","shiftKey","prev","includes","handlePointerDown","button","target","currentTarget","setPointerCapture","pointerId","startX","x","startY","y","pointerStartX","clientX","pointerStartY","clientY","handlePointerMove","deltaX","deltaY","_objectSpread","Math","max","handlePointerUp","item","headers","JSON","stringify","console","log","handleGroup","tableIds","error","handleUngroup","has","handleTableDoubleClick","_groupMap$get","get","groupTables","tableNames","_tables$find2","join","handleReservationSave","data","handleReservationDelete","reservationLabels","LABEL_PADDING","tablesInGroup","avgX","reduce","sum","width","maxY","height","clampedX","min","text","partySize","Boolean","updateWidth","offsetWidth","addEventListener","removeEventListener","className","children","value","onChange","onClick","disabled","trim","ref","reserved","selected","style","left","top","onDoubleClick","onPointerDown","onPointerMove","onPointerUp","ReservationModal","onClose","onSave","onDelete","_ref","_modal$reservation","_modal$reservation2","_modal$reservation3","_modal$reservation3$p","_modal$reservation4","setTime","setName","setPartySize","toString","notes","setNotes","submit","stopPropagation"],"sources":["/workspaces/LocalReservationWebapp/client/src/App.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\n\ntype TableItem = {\n  tableId: number;\n  name: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  capacity?: number | null;\n  groupId: number | null;\n};\n\ntype Group = {\n  groupId: number;\n  tableIds: number[];\n};\n\ntype Reservation = {\n  id: number;\n  groupId: number;\n  time: string;\n  name: string;\n  partySize: number;\n  notes?: string | null;\n};\n\ntype ModalState = {\n  groupId: number;\n  tableNames: string;\n  reservation: Reservation | null;\n};\n\ntype ToastState = {\n  message: string;\n  type?: 'error';\n};\n\nconst API_BASE = 'http://localhost:4000/api';\n\nconst formatTime = (time: string) => {\n  const [hourStr, minuteStr] = time.split(':');\n  const hour = Number(hourStr);\n  if (Number.isNaN(hour)) {\n    return time;\n  }\n  const suffix = hour >= 12 ? 'PM' : 'AM';\n  const displayHour = ((hour + 11) % 12) + 1;\n  return `${displayHour}:${minuteStr} ${suffix}`;\n};\n\nconst todayISO = () => {\n  const now = new Date();\n  const month = String(now.getMonth() + 1).padStart(2, '0');\n  const day = String(now.getDate()).padStart(2, '0');\n  return `${now.getFullYear()}-${month}-${day}`;\n};\n\nconst App: React.FC = () => {\n  const [dateInput, setDateInput] = useState(todayISO());\n  const [activeDate, setActiveDate] = useState<string | null>(null);\n  const [tables, setTables] = useState<TableItem[]>([]);\n  const [groups, setGroups] = useState<Group[]>([]);\n  const [reservations, setReservations] = useState<Reservation[]>([]);\n  const [selectedTableIds, setSelectedTableIds] = useState<number[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [modal, setModal] = useState<ModalState | null>(null);\n  const [toast, setToast] = useState<ToastState | null>(null);\n  const [canvasWidth, setCanvasWidth] = useState(957);\n  const notificationTimeouts = useRef<number[]>([]);\n\n  const dragRef = useRef<{\n    tableId: number;\n    startX: number;\n    startY: number;\n    pointerStartX: number;\n    pointerStartY: number;\n  } | null>(null);\n  const canvasRef = useRef<HTMLDivElement | null>(null);\n\n  const reservationByGroup = useMemo(() => {\n    const map = new Map<number, Reservation>();\n    reservations.forEach((res) => map.set(res.groupId, res));\n    return map;\n  }, [reservations]);\n\n  const groupMap = useMemo(() => {\n    const map = new Map<number, Group>();\n    groups.forEach((group) => map.set(group.groupId, group));\n    return map;\n  }, [groups]);\n\n  const selectedGroupId = useMemo(() => {\n    if (selectedTableIds.length === 0) {\n      return null;\n    }\n    const groupIds = selectedTableIds\n      .map((id) => tables.find((table) => table.tableId === id)?.groupId ?? null)\n      .filter((id): id is number => id !== null);\n    if (groupIds.length !== selectedTableIds.length) {\n      return null;\n    }\n    const unique = new Set(groupIds);\n    if (unique.size !== 1) {\n      return null;\n    }\n    return groupIds[0];\n  }, [selectedTableIds, tables]);\n\n  const showToast = (message: string, type?: 'error') => {\n    setToast({ message, type });\n    setTimeout(() => setToast(null), 3000);\n  };\n\n  const requestNotificationPermission = async () => {\n    if (!('Notification' in window)) {\n      showToast('Notifications are not supported in this browser.', 'error');\n      return;\n    }\n    if (Notification.permission === 'granted') {\n      showToast('Notifications already enabled.');\n      return;\n    }\n    const permission = await Notification.requestPermission();\n    if (permission !== 'granted') {\n      showToast('Notifications blocked. Enable them in Chrome settings.', 'error');\n    }\n  };\n\n  const clearNotifications = () => {\n    notificationTimeouts.current.forEach((id) => window.clearTimeout(id));\n    notificationTimeouts.current = [];\n  };\n\n  const scheduleNotifications = () => {\n    if (!('Notification' in window) || Notification.permission !== 'granted') {\n      return;\n    }\n    clearNotifications();\n    if (!activeDate) {\n      return;\n    }\n    const now = Date.now();\n    reservations.forEach((reservation) => {\n      const [hourStr, minuteStr] = reservation.time.split(':');\n      const hour = Number(hourStr);\n      const minute = Number(minuteStr);\n      if (Number.isNaN(hour) || Number.isNaN(minute)) {\n        return;\n      }\n      const reservationDateTime = new Date(`${activeDate}T${reservation.time}:00`);\n      const offsets = [\n        { minutes: 60, label: '1 hour' },\n        { minutes: 30, label: '30 minutes' }\n      ];\n      offsets.forEach((offset) => {\n        const notifyAt = reservationDateTime.getTime() - offset.minutes * 60 * 1000;\n        const delay = notifyAt - now;\n        if (delay <= 0) {\n          return;\n        }\n        const timeoutId = window.setTimeout(() => {\n          new Notification('Upcoming reservation', {\n            body: `${reservation.name} in ${offset.label} (${formatTime(reservation.time)})`\n          });\n        }, delay);\n        notificationTimeouts.current.push(timeoutId);\n      });\n    });\n  };\n\n  const loadLayout = async (date: string) => {\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE}/layout/${date}`);\n      if (!response.ok) {\n        throw new Error('Failed to load layout.');\n      }\n      const payload = await response.json();\n      setTables(payload.tables);\n      setGroups(payload.groups);\n      setReservations(payload.reservations);\n      setSelectedTableIds([]);\n    } catch (err) {\n      showToast('Could not load layout.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const openDate = async () => {\n    if (!dateInput) {\n      showToast('Pick a date first.', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE}/layout/${dateInput}/init`, {\n        method: 'POST'\n      });\n      if (!response.ok) {\n        throw new Error('Failed to initialize layout.');\n      }\n      setActiveDate(dateInput);\n      await loadLayout(dateInput);\n    } catch (err) {\n      showToast('Could not open date.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const refreshLayout = async () => {\n    if (!activeDate) {\n      return;\n    }\n    await loadLayout(activeDate);\n  };\n\n  const handleTableClick = (tableId: number, event: React.MouseEvent) => {\n    if (event.shiftKey) {\n      setSelectedTableIds((prev) =>\n        prev.includes(tableId) ? prev.filter((id) => id !== tableId) : [...prev, tableId]\n      );\n      return;\n    }\n    setSelectedTableIds([tableId]);\n  };\n\n  const handlePointerDown = (table: TableItem, event: React.PointerEvent) => {\n    if (event.button !== 0) {\n      return;\n    }\n    const target = event.currentTarget as HTMLElement;\n    target.setPointerCapture(event.pointerId);\n    dragRef.current = {\n      tableId: table.tableId,\n      startX: table.x,\n      startY: table.y,\n      pointerStartX: event.clientX,\n      pointerStartY: event.clientY\n    };\n  };\n\n  const handlePointerMove = (event: React.PointerEvent) => {\n    if (!dragRef.current) {\n      return;\n    }\n    const { tableId, startX, startY, pointerStartX, pointerStartY } = dragRef.current;\n    const deltaX = event.clientX - pointerStartX;\n    const deltaY = event.clientY - pointerStartY;\n    setTables((prev) =>\n      prev.map((table) =>\n        table.tableId === tableId\n          ? { ...table, x: Math.max(0, startX + deltaX), y: Math.max(0, startY + deltaY) }\n          : table\n      )\n    );\n  };\n\n  const handlePointerUp = async (event: React.PointerEvent) => {\n    if (!dragRef.current || !activeDate) {\n      return;\n    }\n    const { tableId } = dragRef.current;\n    dragRef.current = null;\n    const table = tables.find((item) => item.tableId === tableId);\n    if (!table) {\n      return;\n    }\n    try {\n      await fetch(`${API_BASE}/layout/${activeDate}/table/${tableId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ x: table.x, y: table.y })\n      });\n      console.log(`Table ${table.name} (${table.tableId}) position: x=${table.x}, y=${table.y}`);\n    } catch (err) {\n      showToast('Could not save position.', 'error');\n    }\n  };\n\n  const handleGroup = async () => {\n    if (!activeDate) {\n      return;\n    }\n    if (selectedTableIds.length < 2) {\n      showToast('Select at least two tables to group.', 'error');\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE}/layout/${activeDate}/group`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ tableIds: selectedTableIds })\n      });\n      if (!response.ok) {\n        const payload = await response.json();\n        throw new Error(payload.error || 'Failed to group.');\n      }\n      await refreshLayout();\n    } catch (err) {\n      showToast('Grouping failed. Ungroup tables first.', 'error');\n    }\n  };\n\n  const handleUngroup = async () => {\n    if (!activeDate || !selectedGroupId) {\n      showToast('Select a grouped set of tables.', 'error');\n      return;\n    }\n    if (reservationByGroup.has(selectedGroupId)) {\n      showToast('Delete the reservation before ungrouping.', 'error');\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE}/layout/${activeDate}/ungroup`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ groupId: selectedGroupId })\n      });\n      if (!response.ok) {\n        const payload = await response.json();\n        throw new Error(payload.error || 'Failed to ungroup.');\n      }\n      await refreshLayout();\n    } catch (err) {\n      showToast('Ungroup failed.', 'error');\n    }\n  };\n\n  const handleTableDoubleClick = async (table: TableItem) => {\n    if (!activeDate) {\n      return;\n    }\n    let groupId = table.groupId;\n    if (!groupId) {\n      try {\n        const response = await fetch(`${API_BASE}/layout/${activeDate}/group`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ tableIds: [table.tableId] })\n        });\n        if (!response.ok) {\n          const payload = await response.json();\n          throw new Error(payload.error || 'Failed to create group.');\n        }\n        const payload = await response.json();\n        groupId = payload.groupId;\n        setTables((prev) =>\n          prev.map((item) =>\n            item.tableId === table.tableId ? { ...item, groupId } : item\n          )\n        );\n      } catch (err) {\n        showToast('Could not create group.', 'error');\n        return;\n      }\n    }\n\n    if (groupId === null) {\n      showToast('Could not open reservation.', 'error');\n      return;\n    }\n    const reservation = reservationByGroup.get(groupId) || null;\n    const groupTables = groupMap.get(groupId)?.tableIds || [table.tableId];\n    const tableNames = groupTables\n      .map((id) => tables.find((item) => item.tableId === id)?.name || `T${id}`)\n      .join(', ');\n    setModal({ groupId, tableNames, reservation });\n  };\n\n  const handleReservationSave = async (data: {\n    time: string;\n    name: string;\n    partySize: number;\n    notes?: string;\n  }) => {\n    if (!activeDate || !modal) {\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE}/layout/${activeDate}/reservation`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ groupId: modal.groupId, ...data })\n      });\n      if (!response.ok) {\n        const payload = await response.json();\n        throw new Error(payload.error || 'Failed to save reservation.');\n      }\n      setModal(null);\n      await refreshLayout();\n    } catch (err) {\n      showToast('Reservation save failed.', 'error');\n    }\n  };\n\n  const handleReservationDelete = async () => {\n    if (!activeDate || !modal?.reservation) {\n      return;\n    }\n    try {\n      await fetch(`${API_BASE}/layout/${activeDate}/reservation/${modal.reservation.id}`, {\n        method: 'DELETE'\n      });\n      setModal(null);\n      await refreshLayout();\n    } catch (err) {\n      showToast('Reservation delete failed.', 'error');\n    }\n  };\n\n  const reservationLabels = useMemo(() => {\n    const LABEL_PADDING = 12;\n    return reservations\n      .map((reservation) => {\n        const tablesInGroup = tables.filter((table) => table.groupId === reservation.groupId);\n        if (tablesInGroup.length === 0) {\n          return null;\n        }\n        const avgX =\n          tablesInGroup.reduce((sum, table) => sum + table.x + table.width / 2, 0) /\n          tablesInGroup.length;\n        const maxY = Math.max(\n          ...tablesInGroup.map((table) => table.y + table.height)\n        );\n        const clampedX = Math.min(\n          Math.max(avgX, LABEL_PADDING),\n          canvasWidth - LABEL_PADDING\n        );\n        return {\n          id: reservation.id,\n          x: clampedX,\n          y: maxY + 10,\n          text: `${reservation.name} - ${formatTime(reservation.time)} (${reservation.partySize})`\n        };\n      })\n      .filter(Boolean) as Array<{ id: number; x: number; y: number; text: string }>;\n  }, [reservations, tables]);\n\n  useEffect(() => {\n    const updateWidth = () => {\n      if (canvasRef.current) {\n        setCanvasWidth(canvasRef.current.offsetWidth || 957);\n      }\n    };\n    updateWidth();\n    window.addEventListener('resize', updateWidth);\n    return () => window.removeEventListener('resize', updateWidth);\n  }, []);\n\n  useEffect(() => {\n    scheduleNotifications();\n    return () => clearNotifications();\n  }, [reservations, activeDate]);\n\n  if (!activeDate) {\n    return (\n      <div className=\"app\">\n        <header className=\"header\">\n          <h1>Razorback Pizza Reservations</h1>\n        </header>\n        <main className=\"page\">\n          <div className=\"card date-picker\">\n            <label>\n              Select date\n              <input\n                className=\"input\"\n                type=\"date\"\n                value={dateInput}\n                onChange={(event) => setDateInput(event.target.value)}\n              />\n            </label>\n            <button className=\"button\" onClick={openDate} disabled={loading}>\n              {loading ? 'Opening...' : 'Open'}\n            </button>\n            <div className=\"footer-note\">\n              Reservation app for Razorback Pizza. Create or load a floor plan for the selected date.\n            </div>\n          </div>\n        </main>\n        {toast && (\n          <div className={`toast ${toast.type || ''}`.trim()}>{toast.message}</div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <header className=\"header\">\n        <h1>Floor Plan for {activeDate}</h1>\n        <button className=\"button secondary\" onClick={() => setActiveDate(null)}>\n          Change date\n        </button>\n      </header>\n      <main className=\"page\">\n        <div className=\"toolbar\">\n          <button className=\"button\" onClick={handleGroup}>\n            Group\n          </button>\n          <button className=\"button secondary\" onClick={handleUngroup}>\n            Ungroup\n          </button>\n          <button className=\"button secondary\" onClick={refreshLayout}>\n            Refresh\n          </button>\n          <button className=\"button secondary\" onClick={requestNotificationPermission}>\n            Enable notifications\n          </button>\n          <div className=\"footer-note\">Shift+click to multi-select tables.</div>\n        </div>\n        <div className=\"canvas\" ref={canvasRef}>\n          {tables.map((table) => {\n            const reserved = table.groupId ? reservationByGroup.has(table.groupId) : false;\n            const selected = selectedTableIds.includes(table.tableId);\n            return (\n              <div\n                key={table.tableId}\n                className={`table${reserved ? ' reserved' : ''}${selected ? ' selected' : ''}`}\n                style={{\n                  width: table.width,\n                  height: table.height,\n                  left: table.x,\n                  top: table.y\n                }}\n                onClick={(event) => handleTableClick(table.tableId, event)}\n                onDoubleClick={() => handleTableDoubleClick(table)}\n                onPointerDown={(event) => handlePointerDown(table, event)}\n                onPointerMove={handlePointerMove}\n                onPointerUp={handlePointerUp}\n              >\n                {table.name}\n              </div>\n            );\n          })}\n          {reservationLabels.map((label) => (\n            <div\n              key={label.id}\n              className=\"reservation-label\"\n              style={{ left: label.x, top: label.y }}\n            >\n              {label.text}\n            </div>\n          ))}\n        </div>\n      </main>\n      {modal && (\n        <ReservationModal\n          modal={modal}\n          onClose={() => setModal(null)}\n          onSave={handleReservationSave}\n          onDelete={handleReservationDelete}\n        />\n      )}\n      {toast && <div className={`toast ${toast.type || ''}`.trim()}>{toast.message}</div>}\n    </div>\n  );\n};\n\ntype ReservationModalProps = {\n  modal: ModalState;\n  onClose: () => void;\n  onSave: (data: { time: string; name: string; partySize: number; notes?: string }) => void;\n  onDelete: () => void;\n};\n\nconst ReservationModal: React.FC<ReservationModalProps> = ({\n  modal,\n  onClose,\n  onSave,\n  onDelete\n}) => {\n  const [time, setTime] = useState(modal.reservation?.time || '18:30');\n  const [name, setName] = useState(modal.reservation?.name || '');\n  const [partySize, setPartySize] = useState(\n    modal.reservation?.partySize?.toString() || '2'\n  );\n  const [notes, setNotes] = useState(modal.reservation?.notes || '');\n\n  const submit = () => {\n    const size = Number(partySize);\n    if (!time || !name || Number.isNaN(size)) {\n      return;\n    }\n    onSave({ time, name, partySize: size, notes });\n  };\n\n  return (\n    <div className=\"modal-backdrop\" onClick={onClose}>\n      <div className=\"modal\" onClick={(event) => event.stopPropagation()}>\n        <h2>Reservation</h2>\n        <div className=\"footer-note\">Tables: {modal.tableNames}</div>\n        <label>\n          Time\n          <input\n            className=\"input\"\n            type=\"time\"\n            value={time}\n            onChange={(event) => setTime(event.target.value)}\n          />\n        </label>\n        <label>\n          Name\n          <input\n            className=\"input\"\n            value={name}\n            onChange={(event) => setName(event.target.value)}\n          />\n        </label>\n        <label>\n          Party size\n          <input\n            className=\"input\"\n            type=\"number\"\n            min=\"1\"\n            value={partySize}\n            onChange={(event) => setPartySize(event.target.value)}\n          />\n        </label>\n        <label>\n          Notes\n          <input\n            className=\"input\"\n            value={notes}\n            onChange={(event) => setNotes(event.target.value)}\n          />\n        </label>\n        <div className=\"toolbar\">\n          <button className=\"button\" onClick={submit}>\n            Save\n          </button>\n          <button className=\"button secondary\" onClick={onClose}>\n            Cancel\n          </button>\n          {modal.reservation && (\n            <button className=\"button secondary\" onClick={onDelete}>\n              Delete\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}