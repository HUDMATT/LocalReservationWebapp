{"ast":null,"code":"import _objectSpread from\"/workspaces/LocalReservationWebapp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useRef,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE='http://localhost:4000/api';const formatTime=time=>{const[hourStr,minuteStr]=time.split(':');const hour=Number(hourStr);if(Number.isNaN(hour)){return time;}const suffix=hour>=12?'PM':'AM';const displayHour=(hour+11)%12+1;return\"\".concat(displayHour,\":\").concat(minuteStr,\" \").concat(suffix);};const todayISO=()=>{const now=new Date();const month=String(now.getMonth()+1).padStart(2,'0');const day=String(now.getDate()).padStart(2,'0');return\"\".concat(now.getFullYear(),\"-\").concat(month,\"-\").concat(day);};const App=()=>{const[dateInput,setDateInput]=useState(todayISO());const[activeDate,setActiveDate]=useState(null);const[tables,setTables]=useState([]);const[groups,setGroups]=useState([]);const[reservations,setReservations]=useState([]);const[selectedTableIds,setSelectedTableIds]=useState([]);const[loading,setLoading]=useState(false);const[modal,setModal]=useState(null);const[toast,setToast]=useState(null);const[canvasWidth,setCanvasWidth]=useState(957);const notificationTimeouts=useRef([]);const dragRef=useRef(null);const canvasRef=useRef(null);const reservationsByGroup=useMemo(()=>{const map=new Map();reservations.forEach(res=>{const list=map.get(res.groupId)||[];list.push(res);map.set(res.groupId,list);});map.forEach(list=>list.sort((a,b)=>a.time.localeCompare(b.time)));return map;},[reservations]);const groupMap=useMemo(()=>{const map=new Map();groups.forEach(group=>map.set(group.groupId,group));return map;},[groups]);const selectedGroupId=useMemo(()=>{if(selectedTableIds.length===0){return null;}const groupIds=selectedTableIds.map(id=>{var _tables$find$groupId,_tables$find;return(_tables$find$groupId=(_tables$find=tables.find(table=>table.tableId===id))===null||_tables$find===void 0?void 0:_tables$find.groupId)!==null&&_tables$find$groupId!==void 0?_tables$find$groupId:null;}).filter(id=>id!==null);if(groupIds.length!==selectedTableIds.length){return null;}const unique=new Set(groupIds);if(unique.size!==1){return null;}return groupIds[0];},[selectedTableIds,tables]);const showToast=(message,type)=>{setToast({message,type});setTimeout(()=>setToast(null),3000);};const requestNotificationPermission=async()=>{if(!('Notification'in window)){showToast('Notifications are not supported in this browser.','error');return;}if(Notification.permission==='granted'){showToast('Notifications already enabled.');return;}const permission=await Notification.requestPermission();if(permission!=='granted'){showToast('Notifications blocked. Enable them in Chrome settings.','error');}};const clearNotifications=()=>{notificationTimeouts.current.forEach(id=>window.clearTimeout(id));notificationTimeouts.current=[];};const scheduleNotifications=()=>{if(!('Notification'in window)||Notification.permission!=='granted'){return;}clearNotifications();if(!activeDate){return;}const now=Date.now();reservations.forEach(reservation=>{const[hourStr,minuteStr]=reservation.time.split(':');const hour=Number(hourStr);const minute=Number(minuteStr);if(Number.isNaN(hour)||Number.isNaN(minute)){return;}const reservationDateTime=new Date(\"\".concat(activeDate,\"T\").concat(reservation.time,\":00\"));const offsets=[{minutes:60,label:'1 hour'},{minutes:30,label:'30 minutes'}];offsets.forEach(offset=>{const notifyAt=reservationDateTime.getTime()-offset.minutes*60*1000;const delay=notifyAt-now;if(delay<=0){return;}const timeoutId=window.setTimeout(()=>{new Notification('Upcoming reservation',{body:\"\".concat(reservation.name,\" in \").concat(offset.label,\" (\").concat(formatTime(reservation.time),\")\")});},delay);notificationTimeouts.current.push(timeoutId);});});};const loadLayout=async date=>{setLoading(true);try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(date));if(!response.ok){throw new Error('Failed to load layout.');}const payload=await response.json();setTables(payload.tables);setGroups(payload.groups);setReservations(payload.reservations);setSelectedTableIds([]);}catch(err){showToast('Could not load layout.','error');}finally{setLoading(false);}};const openDate=async()=>{if(!dateInput){showToast('Pick a date first.','error');return;}setLoading(true);try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(dateInput,\"/init\"),{method:'POST'});if(!response.ok){throw new Error('Failed to initialize layout.');}setActiveDate(dateInput);await loadLayout(dateInput);}catch(err){showToast('Could not open date.','error');}finally{setLoading(false);}};const refreshLayout=async()=>{if(!activeDate){return;}await loadLayout(activeDate);};const handleTableClick=(tableId,event)=>{if(event.shiftKey){setSelectedTableIds(prev=>prev.includes(tableId)?prev.filter(id=>id!==tableId):[...prev,tableId]);return;}setSelectedTableIds([tableId]);};const handlePointerDown=(table,event)=>{if(event.button!==0){return;}const target=event.currentTarget;target.setPointerCapture(event.pointerId);dragRef.current={tableId:table.tableId,startX:table.x,startY:table.y,pointerStartX:event.clientX,pointerStartY:event.clientY};};const handlePointerMove=event=>{if(!dragRef.current){return;}const{tableId,startX,startY,pointerStartX,pointerStartY}=dragRef.current;const deltaX=event.clientX-pointerStartX;const deltaY=event.clientY-pointerStartY;setTables(prev=>prev.map(table=>table.tableId===tableId?_objectSpread(_objectSpread({},table),{},{x:Math.max(0,startX+deltaX),y:Math.max(0,startY+deltaY)}):table));};const handlePointerUp=async event=>{if(!dragRef.current||!activeDate){return;}const{tableId}=dragRef.current;dragRef.current=null;const table=tables.find(item=>item.tableId===tableId);if(!table){return;}try{await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/table/\").concat(tableId),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({x:table.x,y:table.y})});console.log(\"Table \".concat(table.name,\" (\").concat(table.tableId,\") position: x=\").concat(table.x,\", y=\").concat(table.y));}catch(err){showToast('Could not save position.','error');}};const handleGroup=async()=>{if(!activeDate){return;}if(selectedTableIds.length<2){showToast('Select at least two tables to group.','error');return;}try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/group\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tableIds:selectedTableIds})});if(!response.ok){const payload=await response.json();throw new Error(payload.error||'Failed to group.');}await refreshLayout();}catch(err){showToast('Grouping failed. Ungroup tables first.','error');}};const handleUngroup=async()=>{if(!activeDate||!selectedGroupId){showToast('Select a grouped set of tables.','error');return;}if((reservationsByGroup.get(selectedGroupId)||[]).length>0){showToast('Delete the reservation before ungrouping.','error');return;}try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/ungroup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({groupId:selectedGroupId})});if(!response.ok){const payload=await response.json();throw new Error(payload.error||'Failed to ungroup.');}await refreshLayout();}catch(err){showToast('Ungroup failed.','error');}};const handleTableDoubleClick=async table=>{var _groupMap$get,_groupReservations$0$,_groupReservations$;if(!activeDate){return;}let groupId=table.groupId;if(!groupId){try{const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/group\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tableIds:[table.tableId]})});if(!response.ok){const payload=await response.json();throw new Error(payload.error||'Failed to create group.');}const payload=await response.json();groupId=payload.groupId;setTables(prev=>prev.map(item=>item.tableId===table.tableId?_objectSpread(_objectSpread({},item),{},{groupId}):item));}catch(err){showToast('Could not create group.','error');return;}}if(groupId===null){showToast('Could not open reservation.','error');return;}const groupReservations=reservationsByGroup.get(groupId)||[];const groupTables=((_groupMap$get=groupMap.get(groupId))===null||_groupMap$get===void 0?void 0:_groupMap$get.tableIds)||[table.tableId];const tableNames=groupTables.map(id=>{var _tables$find2;return((_tables$find2=tables.find(item=>item.tableId===id))===null||_tables$find2===void 0?void 0:_tables$find2.name)||\"T\".concat(id);}).join(', ');const defaultReservationId=(_groupReservations$0$=(_groupReservations$=groupReservations[0])===null||_groupReservations$===void 0?void 0:_groupReservations$.id)!==null&&_groupReservations$0$!==void 0?_groupReservations$0$:null;setModal({groupId,tableNames,reservations:groupReservations,defaultReservationId});};const handleReservationSave=async data=>{if(!activeDate||!modal){return;}try{var _data$reservationId;const response=await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/reservation\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread({groupId:modal.groupId,reservationId:(_data$reservationId=data.reservationId)!==null&&_data$reservationId!==void 0?_data$reservationId:null},data))});if(!response.ok){const payload=await response.json();throw new Error(payload.error||'Failed to save reservation.');}setModal(null);await refreshLayout();}catch(err){showToast('Reservation save failed.','error');}};const handleReservationDelete=async reservationId=>{if(!activeDate||!reservationId){return;}try{await fetch(\"\".concat(API_BASE,\"/layout/\").concat(activeDate,\"/reservation/\").concat(reservationId),{method:'DELETE'});setModal(null);await refreshLayout();}catch(err){showToast('Reservation delete failed.','error');}};const reservationLabels=useMemo(()=>{const LABEL_PADDING=12;return Array.from(reservationsByGroup.entries()).map(_ref=>{let[groupId,groupReservations]=_ref;const tablesInGroup=tables.filter(table=>table.groupId===groupId);if(tablesInGroup.length===0){return null;}const avgX=tablesInGroup.reduce((sum,table)=>sum+table.x+table.width/2,0)/tablesInGroup.length;const maxY=Math.max(...tablesInGroup.map(table=>table.y+table.height));const primary=groupReservations[0];const extraCount=groupReservations.length-1;const extraText=extraCount>0?\" +\".concat(extraCount):'';const clampedX=Math.min(Math.max(avgX,LABEL_PADDING),canvasWidth-LABEL_PADDING);return{id:groupId,x:clampedX,y:maxY+10,text:\"\".concat(primary.name,\" - \").concat(formatTime(primary.time),\" (\").concat(primary.partySize,\")\").concat(extraText)};}).filter(Boolean);},[reservationsByGroup,tables,canvasWidth]);useEffect(()=>{const updateWidth=()=>{if(canvasRef.current){setCanvasWidth(canvasRef.current.offsetWidth||957);}};updateWidth();window.addEventListener('resize',updateWidth);return()=>window.removeEventListener('resize',updateWidth);},[]);useEffect(()=>{scheduleNotifications();return()=>clearNotifications();},[reservations,activeDate]);if(!activeDate){return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Razorback Pizza Reservations\"})}),/*#__PURE__*/_jsx(\"main\",{className:\"page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card date-picker\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Select date\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"date\",value:dateInput,onChange:event=>setDateInput(event.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:openDate,disabled:loading,children:loading?'Opening...':'Open'}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-note\",children:\"Reservation app for Razorback Pizza. Create or load a floor plan for the selected date.\"})]})}),toast&&/*#__PURE__*/_jsx(\"div\",{className:\"toast \".concat(toast.type||'').trim(),children:toast.message})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Floor Plan for \",activeDate]}),/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:()=>setActiveDate(null),children:\"Change date\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleGroup,children:\"Group\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:handleUngroup,children:\"Ungroup\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:refreshLayout,children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:requestNotificationPermission,children:\"Enable notifications\"}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-note\",children:\"Shift+click to multi-select tables.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"canvas\",ref:canvasRef,children:[tables.map(table=>{const reserved=table.groupId?(reservationsByGroup.get(table.groupId)||[]).length>0:false;const selected=selectedTableIds.includes(table.tableId);return/*#__PURE__*/_jsx(\"div\",{className:\"table\".concat(reserved?' reserved':'').concat(selected?' selected':''),style:{width:table.width,height:table.height,left:table.x,top:table.y},onClick:event=>handleTableClick(table.tableId,event),onDoubleClick:()=>handleTableDoubleClick(table),onPointerDown:event=>handlePointerDown(table,event),onPointerMove:handlePointerMove,onPointerUp:handlePointerUp,children:table.name},table.tableId);}),reservationLabels.map(label=>/*#__PURE__*/_jsx(\"div\",{className:\"reservation-label\",style:{left:label.x,top:label.y},children:label.text},label.id))]})]}),modal&&/*#__PURE__*/_jsx(ReservationModal,{modal:modal,onClose:()=>setModal(null),onSave:handleReservationSave,onDelete:handleReservationDelete}),toast&&/*#__PURE__*/_jsx(\"div\",{className:\"toast \".concat(toast.type||'').trim(),children:toast.message})]});};const ReservationModal=_ref2=>{var _currentReservation$p;let{modal,onClose,onSave,onDelete}=_ref2;const[selectedId,setSelectedId]=useState(modal.defaultReservationId?modal.defaultReservationId.toString():'');const currentReservation=modal.reservations.find(reservation=>reservation.id.toString()===selectedId)||null;const[time,setTime]=useState((currentReservation===null||currentReservation===void 0?void 0:currentReservation.time)||'18:30');const[name,setName]=useState((currentReservation===null||currentReservation===void 0?void 0:currentReservation.name)||'');const[partySize,setPartySize]=useState((currentReservation===null||currentReservation===void 0?void 0:(_currentReservation$p=currentReservation.partySize)===null||_currentReservation$p===void 0?void 0:_currentReservation$p.toString())||'2');const[notes,setNotes]=useState((currentReservation===null||currentReservation===void 0?void 0:currentReservation.notes)||'');useEffect(()=>{setSelectedId(modal.defaultReservationId?modal.defaultReservationId.toString():'');},[modal.defaultReservationId,modal.reservations]);useEffect(()=>{var _reservation$partySiz;const reservation=modal.reservations.find(item=>item.id.toString()===selectedId)||null;setTime((reservation===null||reservation===void 0?void 0:reservation.time)||'18:30');setName((reservation===null||reservation===void 0?void 0:reservation.name)||'');setPartySize((reservation===null||reservation===void 0?void 0:(_reservation$partySiz=reservation.partySize)===null||_reservation$partySiz===void 0?void 0:_reservation$partySiz.toString())||'2');setNotes((reservation===null||reservation===void 0?void 0:reservation.notes)||'');},[selectedId,modal.reservations]);const submit=()=>{const size=Number(partySize);if(!time||!name||Number.isNaN(size)){return;}onSave({reservationId:selectedId?Number(selectedId):null,time,name,partySize:size,notes});};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:event=>event.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reservation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-note\",children:[\"Tables: \",modal.tableNames]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Existing reservations\",/*#__PURE__*/_jsxs(\"select\",{className:\"input\",value:selectedId,onChange:event=>setSelectedId(event.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"New reservation\"}),modal.reservations.map(reservation=>/*#__PURE__*/_jsxs(\"option\",{value:reservation.id,children:[reservation.name,\" - \",formatTime(reservation.time)]},reservation.id))]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Time\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"time\",value:time,onChange:event=>setTime(event.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Name\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",value:name,onChange:event=>setName(event.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Party size\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"number\",min:\"1\",value:partySize,onChange:event=>setPartySize(event.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Notes\",/*#__PURE__*/_jsx(\"input\",{className:\"input\",value:notes,onChange:event=>setNotes(event.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:submit,children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:onClose,children:\"Cancel\"}),selectedId&&/*#__PURE__*/_jsx(\"button\",{className:\"button secondary\",onClick:()=>onDelete(Number(selectedId)),children:\"Delete\"})]})]})});};export default App;","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","jsx","_jsx","jsxs","_jsxs","API_BASE","formatTime","time","hourStr","minuteStr","split","hour","Number","isNaN","suffix","displayHour","concat","todayISO","now","Date","month","String","getMonth","padStart","day","getDate","getFullYear","App","dateInput","setDateInput","activeDate","setActiveDate","tables","setTables","groups","setGroups","reservations","setReservations","selectedTableIds","setSelectedTableIds","loading","setLoading","modal","setModal","toast","setToast","canvasWidth","setCanvasWidth","notificationTimeouts","dragRef","canvasRef","reservationsByGroup","map","Map","forEach","res","list","get","groupId","push","set","sort","a","b","localeCompare","groupMap","group","selectedGroupId","length","groupIds","id","_tables$find$groupId","_tables$find","find","table","tableId","filter","unique","Set","size","showToast","message","type","setTimeout","requestNotificationPermission","window","Notification","permission","requestPermission","clearNotifications","current","clearTimeout","scheduleNotifications","reservation","minute","reservationDateTime","offsets","minutes","label","offset","notifyAt","getTime","delay","timeoutId","body","name","loadLayout","date","response","fetch","ok","Error","payload","json","err","openDate","method","refreshLayout","handleTableClick","event","shiftKey","prev","includes","handlePointerDown","button","target","currentTarget","setPointerCapture","pointerId","startX","x","startY","y","pointerStartX","clientX","pointerStartY","clientY","handlePointerMove","deltaX","deltaY","_objectSpread","Math","max","handlePointerUp","item","headers","JSON","stringify","console","log","handleGroup","tableIds","error","handleUngroup","handleTableDoubleClick","_groupMap$get","_groupReservations$0$","_groupReservations$","groupReservations","groupTables","tableNames","_tables$find2","join","defaultReservationId","handleReservationSave","data","_data$reservationId","reservationId","handleReservationDelete","reservationLabels","LABEL_PADDING","Array","from","entries","_ref","tablesInGroup","avgX","reduce","sum","width","maxY","height","primary","extraCount","extraText","clampedX","min","text","partySize","Boolean","updateWidth","offsetWidth","addEventListener","removeEventListener","className","children","value","onChange","onClick","disabled","trim","ref","reserved","selected","style","left","top","onDoubleClick","onPointerDown","onPointerMove","onPointerUp","ReservationModal","onClose","onSave","onDelete","_ref2","_currentReservation$p","selectedId","setSelectedId","toString","currentReservation","setTime","setName","setPartySize","notes","setNotes","_reservation$partySiz","submit","stopPropagation"],"sources":["/workspaces/LocalReservationWebapp/client/src/App.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\n\ntype TableItem = {\n  tableId: number;\n  name: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  capacity?: number | null;\n  groupId: number | null;\n};\n\ntype Group = {\n  groupId: number;\n  tableIds: number[];\n};\n\ntype Reservation = {\n  id: number;\n  groupId: number;\n  time: string;\n  name: string;\n  partySize: number;\n  notes?: string | null;\n};\n\ntype ModalState = {\n  groupId: number;\n  tableNames: string;\n  reservations: Reservation[];\n  defaultReservationId: number | null;\n};\n\ntype ToastState = {\n  message: string;\n  type?: 'error';\n};\n\nconst API_BASE = 'http://localhost:4000/api';\n\nconst formatTime = (time: string) => {\n  const [hourStr, minuteStr] = time.split(':');\n  const hour = Number(hourStr);\n  if (Number.isNaN(hour)) {\n    return time;\n  }\n  const suffix = hour >= 12 ? 'PM' : 'AM';\n  const displayHour = ((hour + 11) % 12) + 1;\n  return `${displayHour}:${minuteStr} ${suffix}`;\n};\n\nconst todayISO = () => {\n  const now = new Date();\n  const month = String(now.getMonth() + 1).padStart(2, '0');\n  const day = String(now.getDate()).padStart(2, '0');\n  return `${now.getFullYear()}-${month}-${day}`;\n};\n\nconst App: React.FC = () => {\n  const [dateInput, setDateInput] = useState(todayISO());\n  const [activeDate, setActiveDate] = useState<string | null>(null);\n  const [tables, setTables] = useState<TableItem[]>([]);\n  const [groups, setGroups] = useState<Group[]>([]);\n  const [reservations, setReservations] = useState<Reservation[]>([]);\n  const [selectedTableIds, setSelectedTableIds] = useState<number[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [modal, setModal] = useState<ModalState | null>(null);\n  const [toast, setToast] = useState<ToastState | null>(null);\n  const [canvasWidth, setCanvasWidth] = useState(957);\n  const notificationTimeouts = useRef<number[]>([]);\n\n  const dragRef = useRef<{\n    tableId: number;\n    startX: number;\n    startY: number;\n    pointerStartX: number;\n    pointerStartY: number;\n  } | null>(null);\n  const canvasRef = useRef<HTMLDivElement | null>(null);\n\n  const reservationsByGroup = useMemo(() => {\n    const map = new Map<number, Reservation[]>();\n    reservations.forEach((res) => {\n      const list = map.get(res.groupId) || [];\n      list.push(res);\n      map.set(res.groupId, list);\n    });\n    map.forEach((list) => list.sort((a, b) => a.time.localeCompare(b.time)));\n    return map;\n  }, [reservations]);\n\n  const groupMap = useMemo(() => {\n    const map = new Map<number, Group>();\n    groups.forEach((group) => map.set(group.groupId, group));\n    return map;\n  }, [groups]);\n\n  const selectedGroupId = useMemo(() => {\n    if (selectedTableIds.length === 0) {\n      return null;\n    }\n    const groupIds = selectedTableIds\n      .map((id) => tables.find((table) => table.tableId === id)?.groupId ?? null)\n      .filter((id): id is number => id !== null);\n    if (groupIds.length !== selectedTableIds.length) {\n      return null;\n    }\n    const unique = new Set(groupIds);\n    if (unique.size !== 1) {\n      return null;\n    }\n    return groupIds[0];\n  }, [selectedTableIds, tables]);\n\n  const showToast = (message: string, type?: 'error') => {\n    setToast({ message, type });\n    setTimeout(() => setToast(null), 3000);\n  };\n\n  const requestNotificationPermission = async () => {\n    if (!('Notification' in window)) {\n      showToast('Notifications are not supported in this browser.', 'error');\n      return;\n    }\n    if (Notification.permission === 'granted') {\n      showToast('Notifications already enabled.');\n      return;\n    }\n    const permission = await Notification.requestPermission();\n    if (permission !== 'granted') {\n      showToast('Notifications blocked. Enable them in Chrome settings.', 'error');\n    }\n  };\n\n  const clearNotifications = () => {\n    notificationTimeouts.current.forEach((id) => window.clearTimeout(id));\n    notificationTimeouts.current = [];\n  };\n\n  const scheduleNotifications = () => {\n    if (!('Notification' in window) || Notification.permission !== 'granted') {\n      return;\n    }\n    clearNotifications();\n    if (!activeDate) {\n      return;\n    }\n    const now = Date.now();\n    reservations.forEach((reservation) => {\n      const [hourStr, minuteStr] = reservation.time.split(':');\n      const hour = Number(hourStr);\n      const minute = Number(minuteStr);\n      if (Number.isNaN(hour) || Number.isNaN(minute)) {\n        return;\n      }\n      const reservationDateTime = new Date(`${activeDate}T${reservation.time}:00`);\n      const offsets = [\n        { minutes: 60, label: '1 hour' },\n        { minutes: 30, label: '30 minutes' }\n      ];\n      offsets.forEach((offset) => {\n        const notifyAt = reservationDateTime.getTime() - offset.minutes * 60 * 1000;\n        const delay = notifyAt - now;\n        if (delay <= 0) {\n          return;\n        }\n        const timeoutId = window.setTimeout(() => {\n          new Notification('Upcoming reservation', {\n            body: `${reservation.name} in ${offset.label} (${formatTime(reservation.time)})`\n          });\n        }, delay);\n        notificationTimeouts.current.push(timeoutId);\n      });\n    });\n  };\n\n  const loadLayout = async (date: string) => {\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE}/layout/${date}`);\n      if (!response.ok) {\n        throw new Error('Failed to load layout.');\n      }\n      const payload = await response.json();\n      setTables(payload.tables);\n      setGroups(payload.groups);\n      setReservations(payload.reservations);\n      setSelectedTableIds([]);\n    } catch (err) {\n      showToast('Could not load layout.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const openDate = async () => {\n    if (!dateInput) {\n      showToast('Pick a date first.', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE}/layout/${dateInput}/init`, {\n        method: 'POST'\n      });\n      if (!response.ok) {\n        throw new Error('Failed to initialize layout.');\n      }\n      setActiveDate(dateInput);\n      await loadLayout(dateInput);\n    } catch (err) {\n      showToast('Could not open date.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const refreshLayout = async () => {\n    if (!activeDate) {\n      return;\n    }\n    await loadLayout(activeDate);\n  };\n\n  const handleTableClick = (tableId: number, event: React.MouseEvent) => {\n    if (event.shiftKey) {\n      setSelectedTableIds((prev) =>\n        prev.includes(tableId) ? prev.filter((id) => id !== tableId) : [...prev, tableId]\n      );\n      return;\n    }\n    setSelectedTableIds([tableId]);\n  };\n\n  const handlePointerDown = (table: TableItem, event: React.PointerEvent) => {\n    if (event.button !== 0) {\n      return;\n    }\n    const target = event.currentTarget as HTMLElement;\n    target.setPointerCapture(event.pointerId);\n    dragRef.current = {\n      tableId: table.tableId,\n      startX: table.x,\n      startY: table.y,\n      pointerStartX: event.clientX,\n      pointerStartY: event.clientY\n    };\n  };\n\n  const handlePointerMove = (event: React.PointerEvent) => {\n    if (!dragRef.current) {\n      return;\n    }\n    const { tableId, startX, startY, pointerStartX, pointerStartY } = dragRef.current;\n    const deltaX = event.clientX - pointerStartX;\n    const deltaY = event.clientY - pointerStartY;\n    setTables((prev) =>\n      prev.map((table) =>\n        table.tableId === tableId\n          ? { ...table, x: Math.max(0, startX + deltaX), y: Math.max(0, startY + deltaY) }\n          : table\n      )\n    );\n  };\n\n  const handlePointerUp = async (event: React.PointerEvent) => {\n    if (!dragRef.current || !activeDate) {\n      return;\n    }\n    const { tableId } = dragRef.current;\n    dragRef.current = null;\n    const table = tables.find((item) => item.tableId === tableId);\n    if (!table) {\n      return;\n    }\n    try {\n      await fetch(`${API_BASE}/layout/${activeDate}/table/${tableId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ x: table.x, y: table.y })\n      });\n      console.log(`Table ${table.name} (${table.tableId}) position: x=${table.x}, y=${table.y}`);\n    } catch (err) {\n      showToast('Could not save position.', 'error');\n    }\n  };\n\n  const handleGroup = async () => {\n    if (!activeDate) {\n      return;\n    }\n    if (selectedTableIds.length < 2) {\n      showToast('Select at least two tables to group.', 'error');\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE}/layout/${activeDate}/group`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ tableIds: selectedTableIds })\n      });\n      if (!response.ok) {\n        const payload = await response.json();\n        throw new Error(payload.error || 'Failed to group.');\n      }\n      await refreshLayout();\n    } catch (err) {\n      showToast('Grouping failed. Ungroup tables first.', 'error');\n    }\n  };\n\n  const handleUngroup = async () => {\n    if (!activeDate || !selectedGroupId) {\n      showToast('Select a grouped set of tables.', 'error');\n      return;\n    }\n    if ((reservationsByGroup.get(selectedGroupId) || []).length > 0) {\n      showToast('Delete the reservation before ungrouping.', 'error');\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE}/layout/${activeDate}/ungroup`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ groupId: selectedGroupId })\n      });\n      if (!response.ok) {\n        const payload = await response.json();\n        throw new Error(payload.error || 'Failed to ungroup.');\n      }\n      await refreshLayout();\n    } catch (err) {\n      showToast('Ungroup failed.', 'error');\n    }\n  };\n\n  const handleTableDoubleClick = async (table: TableItem) => {\n    if (!activeDate) {\n      return;\n    }\n    let groupId = table.groupId;\n    if (!groupId) {\n      try {\n        const response = await fetch(`${API_BASE}/layout/${activeDate}/group`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ tableIds: [table.tableId] })\n        });\n        if (!response.ok) {\n          const payload = await response.json();\n          throw new Error(payload.error || 'Failed to create group.');\n        }\n        const payload = await response.json();\n        groupId = payload.groupId;\n        setTables((prev) =>\n          prev.map((item) =>\n            item.tableId === table.tableId ? { ...item, groupId } : item\n          )\n        );\n      } catch (err) {\n        showToast('Could not create group.', 'error');\n        return;\n      }\n    }\n\n    if (groupId === null) {\n      showToast('Could not open reservation.', 'error');\n      return;\n    }\n    const groupReservations = reservationsByGroup.get(groupId) || [];\n    const groupTables = groupMap.get(groupId)?.tableIds || [table.tableId];\n    const tableNames = groupTables\n      .map((id) => tables.find((item) => item.tableId === id)?.name || `T${id}`)\n      .join(', ');\n    const defaultReservationId = groupReservations[0]?.id ?? null;\n    setModal({ groupId, tableNames, reservations: groupReservations, defaultReservationId });\n  };\n\n  const handleReservationSave = async (data: {\n    reservationId?: number | null;\n    time: string;\n    name: string;\n    partySize: number;\n    notes?: string;\n  }) => {\n    if (!activeDate || !modal) {\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE}/layout/${activeDate}/reservation`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          groupId: modal.groupId,\n          reservationId: data.reservationId ?? null,\n          ...data\n        })\n      });\n      if (!response.ok) {\n        const payload = await response.json();\n        throw new Error(payload.error || 'Failed to save reservation.');\n      }\n      setModal(null);\n      await refreshLayout();\n    } catch (err) {\n      showToast('Reservation save failed.', 'error');\n    }\n  };\n\n  const handleReservationDelete = async (reservationId?: number | null) => {\n    if (!activeDate || !reservationId) {\n      return;\n    }\n    try {\n      await fetch(\n        `${API_BASE}/layout/${activeDate}/reservation/${reservationId}`,\n        {\n          method: 'DELETE'\n        }\n      );\n      setModal(null);\n      await refreshLayout();\n    } catch (err) {\n      showToast('Reservation delete failed.', 'error');\n    }\n  };\n\n  const reservationLabels = useMemo(() => {\n    const LABEL_PADDING = 12;\n    return Array.from(reservationsByGroup.entries())\n      .map(([groupId, groupReservations]) => {\n        const tablesInGroup = tables.filter((table) => table.groupId === groupId);\n        if (tablesInGroup.length === 0) {\n          return null;\n        }\n        const avgX =\n          tablesInGroup.reduce((sum, table) => sum + table.x + table.width / 2, 0) /\n          tablesInGroup.length;\n        const maxY = Math.max(\n          ...tablesInGroup.map((table) => table.y + table.height)\n        );\n        const primary = groupReservations[0];\n        const extraCount = groupReservations.length - 1;\n        const extraText = extraCount > 0 ? ` +${extraCount}` : '';\n        const clampedX = Math.min(\n          Math.max(avgX, LABEL_PADDING),\n          canvasWidth - LABEL_PADDING\n        );\n        return {\n          id: groupId,\n          x: clampedX,\n          y: maxY + 10,\n          text: `${primary.name} - ${formatTime(primary.time)} (${primary.partySize})${extraText}`\n        };\n      })\n      .filter(Boolean) as Array<{ id: number; x: number; y: number; text: string }>;\n  }, [reservationsByGroup, tables, canvasWidth]);\n\n  useEffect(() => {\n    const updateWidth = () => {\n      if (canvasRef.current) {\n        setCanvasWidth(canvasRef.current.offsetWidth || 957);\n      }\n    };\n    updateWidth();\n    window.addEventListener('resize', updateWidth);\n    return () => window.removeEventListener('resize', updateWidth);\n  }, []);\n\n  useEffect(() => {\n    scheduleNotifications();\n    return () => clearNotifications();\n  }, [reservations, activeDate]);\n\n  if (!activeDate) {\n    return (\n      <div className=\"app\">\n        <header className=\"header\">\n          <h1>Razorback Pizza Reservations</h1>\n        </header>\n        <main className=\"page\">\n          <div className=\"card date-picker\">\n            <label>\n              Select date\n              <input\n                className=\"input\"\n                type=\"date\"\n                value={dateInput}\n                onChange={(event) => setDateInput(event.target.value)}\n              />\n            </label>\n            <button className=\"button\" onClick={openDate} disabled={loading}>\n              {loading ? 'Opening...' : 'Open'}\n            </button>\n            <div className=\"footer-note\">\n              Reservation app for Razorback Pizza. Create or load a floor plan for the selected date.\n            </div>\n          </div>\n        </main>\n        {toast && (\n          <div className={`toast ${toast.type || ''}`.trim()}>{toast.message}</div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <header className=\"header\">\n        <h1>Floor Plan for {activeDate}</h1>\n        <button className=\"button secondary\" onClick={() => setActiveDate(null)}>\n          Change date\n        </button>\n      </header>\n      <main className=\"page\">\n        <div className=\"toolbar\">\n          <button className=\"button\" onClick={handleGroup}>\n            Group\n          </button>\n          <button className=\"button secondary\" onClick={handleUngroup}>\n            Ungroup\n          </button>\n          <button className=\"button secondary\" onClick={refreshLayout}>\n            Refresh\n          </button>\n          <button className=\"button secondary\" onClick={requestNotificationPermission}>\n            Enable notifications\n          </button>\n          <div className=\"footer-note\">Shift+click to multi-select tables.</div>\n        </div>\n        <div className=\"canvas\" ref={canvasRef}>\n          {tables.map((table) => {\n            const reserved = table.groupId\n              ? (reservationsByGroup.get(table.groupId) || []).length > 0\n              : false;\n            const selected = selectedTableIds.includes(table.tableId);\n            return (\n              <div\n                key={table.tableId}\n                className={`table${reserved ? ' reserved' : ''}${selected ? ' selected' : ''}`}\n                style={{\n                  width: table.width,\n                  height: table.height,\n                  left: table.x,\n                  top: table.y\n                }}\n                onClick={(event) => handleTableClick(table.tableId, event)}\n                onDoubleClick={() => handleTableDoubleClick(table)}\n                onPointerDown={(event) => handlePointerDown(table, event)}\n                onPointerMove={handlePointerMove}\n                onPointerUp={handlePointerUp}\n              >\n                {table.name}\n              </div>\n            );\n          })}\n          {reservationLabels.map((label) => (\n            <div\n              key={label.id}\n              className=\"reservation-label\"\n              style={{ left: label.x, top: label.y }}\n            >\n              {label.text}\n            </div>\n          ))}\n        </div>\n      </main>\n      {modal && (\n        <ReservationModal\n          modal={modal}\n          onClose={() => setModal(null)}\n          onSave={handleReservationSave}\n          onDelete={handleReservationDelete}\n        />\n      )}\n      {toast && <div className={`toast ${toast.type || ''}`.trim()}>{toast.message}</div>}\n    </div>\n  );\n};\n\ntype ReservationModalProps = {\n  modal: ModalState;\n  onClose: () => void;\n  onSave: (data: {\n    reservationId?: number | null;\n    time: string;\n    name: string;\n    partySize: number;\n    notes?: string;\n  }) => void;\n  onDelete: (reservationId?: number | null) => void;\n};\n\nconst ReservationModal: React.FC<ReservationModalProps> = ({\n  modal,\n  onClose,\n  onSave,\n  onDelete\n}) => {\n  const [selectedId, setSelectedId] = useState(\n    modal.defaultReservationId ? modal.defaultReservationId.toString() : ''\n  );\n  const currentReservation =\n    modal.reservations.find((reservation) => reservation.id.toString() === selectedId) ||\n    null;\n  const [time, setTime] = useState(currentReservation?.time || '18:30');\n  const [name, setName] = useState(currentReservation?.name || '');\n  const [partySize, setPartySize] = useState(\n    currentReservation?.partySize?.toString() || '2'\n  );\n  const [notes, setNotes] = useState(currentReservation?.notes || '');\n\n  useEffect(() => {\n    setSelectedId(modal.defaultReservationId ? modal.defaultReservationId.toString() : '');\n  }, [modal.defaultReservationId, modal.reservations]);\n\n  useEffect(() => {\n    const reservation =\n      modal.reservations.find((item) => item.id.toString() === selectedId) || null;\n    setTime(reservation?.time || '18:30');\n    setName(reservation?.name || '');\n    setPartySize(reservation?.partySize?.toString() || '2');\n    setNotes(reservation?.notes || '');\n  }, [selectedId, modal.reservations]);\n\n  const submit = () => {\n    const size = Number(partySize);\n    if (!time || !name || Number.isNaN(size)) {\n      return;\n    }\n    onSave({\n      reservationId: selectedId ? Number(selectedId) : null,\n      time,\n      name,\n      partySize: size,\n      notes\n    });\n  };\n\n  return (\n    <div className=\"modal-backdrop\" onClick={onClose}>\n      <div className=\"modal\" onClick={(event) => event.stopPropagation()}>\n        <h2>Reservation</h2>\n        <div className=\"footer-note\">Tables: {modal.tableNames}</div>\n        <label>\n          Existing reservations\n          <select\n            className=\"input\"\n            value={selectedId}\n            onChange={(event) => setSelectedId(event.target.value)}\n          >\n            <option value=\"\">New reservation</option>\n            {modal.reservations.map((reservation) => (\n              <option key={reservation.id} value={reservation.id}>\n                {reservation.name} - {formatTime(reservation.time)}\n              </option>\n            ))}\n          </select>\n        </label>\n        <label>\n          Time\n          <input\n            className=\"input\"\n            type=\"time\"\n            value={time}\n            onChange={(event) => setTime(event.target.value)}\n          />\n        </label>\n        <label>\n          Name\n          <input\n            className=\"input\"\n            value={name}\n            onChange={(event) => setName(event.target.value)}\n          />\n        </label>\n        <label>\n          Party size\n          <input\n            className=\"input\"\n            type=\"number\"\n            min=\"1\"\n            value={partySize}\n            onChange={(event) => setPartySize(event.target.value)}\n          />\n        </label>\n        <label>\n          Notes\n          <input\n            className=\"input\"\n            value={notes}\n            onChange={(event) => setNotes(event.target.value)}\n          />\n        </label>\n        <div className=\"toolbar\">\n          <button className=\"button\" onClick={submit}>\n            Save\n          </button>\n          <button className=\"button secondary\" onClick={onClose}>\n            Cancel\n          </button>\n          {selectedId && (\n            <button className=\"button secondary\" onClick={() => onDelete(Number(selectedId))}>\n              Delete\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}